<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>DER Training | AMS Training Portal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="stylesheet" href="../css/main.css" />
</head>

<body data-module="der">

  <main class="module-container">

    <!-- HEADER -->
    <header class="module-header">
      <h1 data-lang="title">DER Training Module</h1>

      <div class="module-controls">
        <select id="languageToggle">
          <option value="en">English</option>
          <option value="es">Espa√±ol</option>
        </select>

        <button class="btn-secondary" onclick="goDashboard()">
          Back to Dashboard
        </button>
      </div>
    </header>

    <!-- NAV (IDS MUST MATCH EMPLOYEE LOGIC) -->
    <nav class="module-nav">
      <button id="btnContent" onclick="showSection('content')">
        Content
      </button>

      <button id="btnQuiz" onclick="showSection('quiz')">
        Quiz
      </button>

      <button id="btnCertificate" onclick="showSection('certificate')">
        Certificate
      </button>
    </nav>

    <!-- CONTENT -->
    <section id="contentSection" class="module-section">
      <h2 data-lang="contentTitle">DER Training Content</h2>
      <p data-lang="contentIntro">
        This training covers the responsibilities of the Designated Employer Representative (DER).
      </p>

      <!-- üîí MUST CALL DER CONTENT COMPLETION -->
      <button class="btn-primary" onclick="completeDerContent()">
        Continue to Quiz
      </button>
    </section>

    <!-- QUIZ -->
    <section id="quizSection" class="module-section hidden">
      <h2 data-lang="quizTitle">DER Quiz</h2>
      <p data-lang="quizIntro">Complete the quiz to finish training.</p>

      <!-- REQUIRED QUIZ MOUNT -->
      <div id="quizContainer"></div>
    </section>

    <!-- CERTIFICATE -->
    <section id="certificateSection" class="module-section hidden">
      <h2 data-lang="certificateTitle">Training Certificate</h2>

      <p>
        This certifies that
        <strong id="certName">DER Name</strong>
        has successfully completed DER Training.
      </p>

      <p>Date Issued: <span id="certDate"></span></p>
      <p>Verification Code: <span id="certVerify"></span></p>

      <!-- ‚úÖ QR CODE TARGET -->
      <div id="certQR" style="margin-top:16px;"></div>

      <button class="btn-primary" onclick="goDashboard()">
        Return to Dashboard
      </button>
    </section>

  </main>

<!-- GLOBAL ROUTE GUARD (MUST BE FIRST) -->
<script src="../js/route-guard.js"></script>

<!-- ACCESS / UI GUARDS -->
<script src="../js/access-guard.js"></script>
<script src="../js/lang-loader.js"></script>
<script src="../js/progress.js"></script>

<!-- CORE ENGINE -->
<script src="../js/core.js"></script>

<!-- QR LIBRARY -->
<script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script>

<!-- MODULE LOGIC (MUST BE LAST) -->
<script src="../js/der.js"></script>

</body>
</html>
